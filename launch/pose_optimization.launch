<?xml version="1.0" encoding="UTF-8" ?>

<launch>
    <arg name="dataset_name" default="eth"/>
    <arg name="rviz" default="false"/>

    <node name="pose_optimizer" pkg="depth_correction" type="pose_optimization" output="screen">
        <rosparam subst_value="true">
            lr: 0.001
            n_iters: 100
            dataset_name: $(arg dataset_name)
            step: 5
            device: cpu
            r_nn: 0.2
            min_depth: 1.0
            max_depth: 10.0
            grid_res: 0.1
            max_eig_0: 0.0004
            max_eig_1: 0.0025
        </rosparam>
    </node>

    <!-- Rviz -->
    <arg name="config" default="$(dirname)/../config/poseopt.rviz"/>
    <node if="$(arg rviz)" name="rviz" pkg="rviz" type="rviz" args="-d $(arg config)"/>
</launch>
