<?xml version="1.0" encoding="UTF-8" ?>

<launch>
    <arg name="publish_data" default="true"/>
    <arg name="dataset" default="semantic_kitti" doc="supported datasets to train: [asl_laser, semantic_kitti]"/>
    <arg if="$(eval arg('dataset') == 'asl_laser')" name="train_names" default="['eth']"/>
    <arg if="$(eval arg('dataset') == 'asl_laser')" name="val_names" default="['stairs']"/>
    <arg if="$(eval arg('dataset') == 'semantic_kitti')" name="train_names" default="['08_100_150', '00_200_270']"/>
    <arg if="$(eval arg('dataset') == 'semantic_kitti')" name="val_names" default="['09_0_30']"/>

    <arg name="rviz_config" default="$(dirname)/../config/train_$(arg dataset).rviz"/>

    <node name="train" pkg="depth_correction" type="train" output="screen">
        <rosparam subst_value="true">
            publish_data: $(arg publish_data)
            model_type: 'Polynomial'
            dataset: $(arg dataset)
            train_names: $(arg train_names)
            val_names: $(arg val_names)
        </rosparam>
    </node>

    <node if="$(arg publish_data)" name="rviz" pkg="rviz" type="rviz" args="-d $(arg rviz_config)"/>
</launch>
